<div class="container" *ngIf="auction">
  <div class="row">
    <!-- Auction Images -->
    <div class="col-lg-6 mb-4">
      <div class="auction-images">
        <img [src]="auction.imageUrl || 'assets/placeholder.jpg'" 
             [alt]="auction.title" 
             class="main-image">
      </div>
    </div>

    <!-- Auction Info -->
    <div class="col-lg-6">
      <div class="auction-info">
        <h1 class="auction-title">{{ auction.title }}</h1>
        <p class="auction-description">{{ auction.description }}</p>
        
        <div class="auction-meta">
          <div class="row">
            <div class="col-6">
              <small class="text-muted">Category</small>
              <div class="fw-bold">{{ auction.category | titlecase }}</div>
            </div>
            <div class="col-6">
              <small class="text-muted">Condition</small>
              <div class="fw-bold">{{ auction.condition | titlecase }}</div>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-6">
              <small class="text-muted">Seller</small>
              <div class="fw-bold">{{ auction.owner.username }}</div>
            </div>
            <div class="col-6">
              <small class="text-muted">Created</small>
              <div class="fw-bold">{{ auction.createdAt | date:'short' }}</div>
            </div>
          </div>
        </div>

        <!-- Price and Bidding -->
        <div class="bidding-section mt-4">
          <div class="current-price">
            <small class="text-muted">Current Price</small>
            <div class="price-display">{{ formatPrice(auction.currentPrice) }}</div>
            <small class="text-muted">Starting Price: {{ formatPrice(auction.startingPrice) }}</small>
          </div>

          <div class="time-remaining mt-3">
            <small class="text-muted">Time Remaining</small>
            <div class="countdown" [class.ending-soon]="isEndingSoon()">
              {{ getTimeRemaining() }}
            </div>
          </div>

          <!-- Bid Form -->
          <div class="bid-form mt-4" *ngIf="canBid()">
            <h5>Place Your Bid</h5>
            <div class="input-group">
              <span class="input-group-text">{{ currencyService.getCurrentCurrency().symbol }}</span>
              <input type="number" 
                     class="form-control" 
                     [(ngModel)]="bidAmount" 
                     [min]="auction.currentPrice + 1"
                     placeholder="Enter bid amount">
              <button class="btn btn-primary" 
                      (click)="placeBid()" 
                      [disabled]="!bidAmount || bidAmount <= auction.currentPrice">
                Place Bid
              </button>
            </div>
            <small class="text-muted">Minimum bid: {{ formatPrice(auction.currentPrice + 1) }}</small>
          </div>

          <div class="mt-3" *ngIf="!canBid()">
            <div class="alert alert-info" *ngIf="!authService.isUserLoggedIn()">
              <i class="fas fa-info-circle me-2"></i>
              Please log in to place a bid
            </div>
            <div class="alert alert-warning" *ngIf="auction.status === 'ended'">
              <i class="fas fa-clock me-2"></i>
              This auction has ended
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bids History -->
  <div class="row mt-5">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="fas fa-history me-2"></i>
            Bid History ({{ auction.bids.length || 0 }} bids)
          </h5>
        </div>
        <div class="card-body">
          <div class="bid-list" *ngIf="auction.bids && auction.bids.length > 0">
            <div class="bid-item" *ngFor="let bid of auction.bids; trackBy: trackBid">
              <div class="row align-items-center">
                <div class="col-md-3">
                  <div class="bidder">{{ bid.bidder.username }}</div>
                  <small class="text-muted">{{ bid.createdAt | date:'short' }}</small>
                </div>
                <div class="col-md-3">
                  <div class="bid-amount">{{ formatPrice(bid.amount) }}</div>
                </div>
                <div class="col-md-6">
                  <div class="bid-status" [class.winning]="isWinningBid(bid)">
                    <span *ngIf="isWinningBid(bid)" class="badge bg-success">
                      <i class="fas fa-crown me-1"></i>Winning
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="text-center text-muted" *ngIf="!auction.bids || auction.bids.length === 0">
            <i class="fas fa-inbox fa-2x mb-2"></i>
            <p>No bids yet. Be the first to bid!</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading State -->
<div class="container text-center" *ngIf="loading">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
  <p class="mt-2">Loading auction details...</p>
</div> 