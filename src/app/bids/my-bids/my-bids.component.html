<!-- Hero Section -->
<div class="hero-section">
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title">
                <i class="fas fa-list me-3"></i>
                My Activity
            </h1>
            <p class="hero-subtitle">Track your bidding activity and offers</p>
        </div>
    </div>
</div>

<!-- Main Content -->
<div class="main-content">
    <div class="container">
        <!-- Activity Tabs -->
        <div class="activity-tabs-section">
            <ul class="nav nav-tabs" id="activityTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active"
                        id="bids-tab"
                        data-bs-toggle="tab"
                        data-bs-target="#bids"
                        type="button"
                        role="tab">
                        <i class="fas fa-gavel me-2"></i>
                        My Bids
                        <span class="badge bg-secondary ms-2">{{ bids.length
                            }}</span>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link"
                        id="offers-tab"
                        data-bs-toggle="tab"
                        data-bs-target="#offers"
                        type="button"
                        role="tab">
                        <i class="fas fa-handshake me-2"></i>
                        My Offers
                        <span class="badge bg-secondary ms-2">{{ offers.length
                            }}</span>
                    </button>
                </li>
            </ul>
        </div>

        <!-- Tab Content -->
        <div class="tab-content" id="activityTabContent">
            <!-- Bids Tab -->
            <div class="tab-pane fade show active" id="bids" role="tabpanel">
                <!-- Loading State -->
                <div class="loading-state" *ngIf="loadingBids">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="loading-text">Loading your bids...</p>
                </div>

                <!-- Error State -->
                <div class="error-state" *ngIf="errorBids && !loadingBids">
                    <div class="error-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <h3 class="error-title">Oops! Something went wrong</h3>
                    <p class="error-text">{{ errorMessageBids }}</p>
                    <button class="btn btn-primary" (click)="loadBids()">
                        <i class="fas fa-redo me-2"></i>Try Again
                    </button>
                </div>

                <!-- Bids List -->
                <div *ngIf="!loadingBids && !errorBids">
                    <div class="activity-card" *ngFor="let bid of bids">
                        <div class="card-body">
                            <div class="row align-items-center">
                                <div class="col-md-3">
                                    <h6 class="auction-title">{{
                                        bid.auction?.title || 'Auction Title'
                                        }}</h6>
                                    <small class="text-muted">Bid placed: {{
                                        bid.createdAt | date:'short' }}</small>
                                </div>
                                <div class="col-md-2">
                                    <div class="bid-amount">{{
                                        formatPrice(bid.amount) }}</div>
                                    <small class="text-muted">Your bid</small>
                                </div>
                                <div class="col-md-2">
                                    <div class="current-price">{{
                                        formatPrice(bid.auction?.currentPrice ||
                                        0) }}</div>
                                    <small class="text-muted">Current
                                        price</small>
                                </div>
                                <div class="col-md-2">
                                    <div class="bid-status">
                                        <span class="badge"
                                            [class]="getBidStatusClass(bid)">
                                            {{ getBidStatusText(bid) }}
                                        </span>
                                    </div>
                                </div>
                                <div class="col-md-3 text-end">
                                    <button
                                        class="btn btn-outline-primary btn-sm"
                                        [routerLink]="['/auctions', bid.auction?.id]">
                                        <i class="fas fa-eye me-1"></i>
                                        View Auction
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- No Bids -->
                    <div class="empty-state" *ngIf="bids.length === 0">
                        <div class="empty-icon">
                            <i class="fas fa-gavel"></i>
                        </div>
                        <h3 class="empty-title">No bids yet</h3>
                        <p class="empty-text">Start bidding on auctions to see
                            your activity here.</p>
                        <button class="btn btn-primary" routerLink="/auctions">
                            <i class="fas fa-search me-2"></i>
                            Browse Auctions
                        </button>
                    </div>
                </div>
            </div>

            <!-- Offers Tab -->
            <div class="tab-pane fade" id="offers" role="tabpanel">
                <!-- Loading State -->
                <div class="loading-state" *ngIf="loadingOffers">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="loading-text">Loading your offers...</p>
                </div>

                <!-- Error State -->
                <div class="error-state" *ngIf="errorOffers && !loadingOffers">
                    <div class="error-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <h3 class="error-title">Oops! Something went wrong</h3>
                    <p class="error-text">{{ errorMessageOffers }}</p>
                    <button class="btn btn-primary" (click)="loadOffers()">
                        <i class="fas fa-redo me-2"></i>Try Again
                    </button>
                </div>

                <!-- Offers List -->
                <div *ngIf="!loadingOffers && !errorOffers">
                    <div class="activity-card" *ngFor="let offer of offers">
                        <div class="card-body">
                            <div class="row align-items-center">
                                <div class="col-md-3">
                                    <h6 class="auction-title">{{
                                        offer.auction?.title ||
                                        'Direct Sale Title' }}</h6>
                                    <small class="text-muted">Offer made: {{
                                        offer.createdAt | date:'short'
                                        }}</small>
                                    @if (offer.message) {
                                    <div class="offer-message mt-1">
                                        <small
                                            class="text-muted">"{{ offer.message }}"</small>
                                    </div>
                                    }
                                </div>
                                <div class="col-md-2">
                                    <div class="offer-amount">{{
                                        formatPrice(offer.amount) }}</div>
                                    <small class="text-muted">Your offer</small>
                                </div>
                                <div class="col-md-2">
                                    <div class="asking-price">{{
                                        formatPrice(offer.auction?.startingPrice
                                        || 0) }}</div>
                                    <small class="text-muted">Asking
                                        price</small>
                                </div>
                                <div class="col-md-2">
                                    <div class="offer-status">
                                        <span class="badge"
                                            [class]="getOfferStatusClass(offer)">
                                            {{ getOfferStatusText(offer) }}
                                        </span>
                                    </div>
                                </div>
                                <div class="col-md-3 text-end">
                                    <button
                                        class="btn btn-outline-primary btn-sm"
                                        [routerLink]="['/auctions', offer.auction?.id]">
                                        <i class="fas fa-eye me-1"></i>
                                        View Sale
                                    </button>
                                    @if (offer.status === 'rejected') {
                                    <button
                                        class="btn btn-outline-warning btn-sm ms-2"
                                        (click)="makeNewOffer(offer)">
                                        <i class="fas fa-redo me-1"></i>
                                        New Offer
                                    </button>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- No Offers -->
                    <div class="empty-state" *ngIf="offers.length === 0">
                        <div class="empty-icon">
                            <i class="fas fa-handshake"></i>
                        </div>
                        <h3 class="empty-title">No offers yet</h3>
                        <p class="empty-text">Make offers on direct sales to see
                            your activity here.</p>
                        <button class="btn btn-primary" routerLink="/auctions">
                            <i class="fas fa-search me-2"></i>
                            Browse Sales
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>